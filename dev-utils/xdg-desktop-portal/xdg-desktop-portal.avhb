# Copyright 2010-2020 Avouch Authors
# Distributed under the terms of the GNU General Public License v2
# Maintainer: Qurban Ullah <qurbanullah@avouch.org>
# Contributor: Qurban Ullah <qurbanullah@avouch.org>

pkgname=xdg-desktop-portal
pkgver=1.16.0
pkgrel=1
pkgdesc="Desktop integration portals for sandboxed apps"
url="https://github.com/flatpak/xdg-desktop-portal"
arch=('x86_64')
groups=('dev-utils')
license=(LGPL2.1)
depends=(glib2 pipewire fuse2 geoclue2)
makedepends=(python xmlto docbook-xsl git flatpak libportal)
checkdepends=(epiphany gedit gvfs)
source=("https://github.com/flatpak/xdg-desktop-portal/releases/download/$pkgver/$pkgname-$pkgver.tar.xz")

build() {
    cd $pkgname-$pkgver
    ./autogen.sh --prefix=/usr --libexecdir=/usr/lib --disable-docbook-docs
    make ${MAKEFLAGS}
}

check() {
    cd $pkgname-$pkgver
    #make check
}

package() {
    depends+=(xdg-desktop-portal-impl)
    cd $pkgname-$pkgver
    make DESTDIR="$pkgdir" install
}
